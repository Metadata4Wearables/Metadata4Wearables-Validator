#! /bin/bash

timestamp=$(date +%s)
schema=(dataset event participant study)
for i in ${schema[@]} ; do
  echo "Updating $i.json"
  curl --silent -H"If-None-Match: $timestamp" "https://raw.githubusercontent.com/cdsig/CDSIG-Schema/freerange-updates/$i.json" > src/schema/original/$i.json
  cat src/schema/original/$i.json | ./scripts/dereference-schema > src/schema/$i.json
done

npx prettier -w src/schema/*.json
