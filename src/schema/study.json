{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/study.json",
  "$defs": {
    "group": {
      "title": "Group",
      "type": "object",
      "properties": {
        "name": {
          "title": "Group name",
          "description": "Name of group.",
          "example": "ACHM patients",
          "type": "string"
        },
        "description": {
          "title": "Group description",
          "description": "Description of sample group",
          "example": "",
          "type": "string"
        },
        "label": {
          "title": "Group label",
          "description": "Label of sample group",
          "example": 0,
          "type": "integer"
        },
        "size": {
          "title": "Group size",
          "description": "Group size",
          "example": 6,
          "type": "integer",
          "minimum": 1
        },
        "inclusion": {
          "title": "Inclusion criteria",
          "description": "Inclusion criteria for sample group, given as an array of strings",
          "example": "",
          "type": "array",
          "minItems": 1,
          "items": { "type": "string" }
        },
        "exclusion": {
          "title": "Exclusion criteria",
          "description": "Exclusion criteria for sample group, given as an array of strings",
          "example": "",
          "type": "array",
          "minItems": 0,
          "items": { "type": "string" }
        }
      },
      "required": ["name", "description", "label", "size", "inclusion"]
    }
  },
  "title": "Study-level metadata",
  "description": "Study-level metadata describes any information on a specific study, e.g. a specific data collection effort with multiple participants",
  "type": "object",
  "properties": {
    "name": {
      "title": "Name",
      "description": "Informative or internal study name",
      "example": "ACHM2019",
      "type": "string"
    },
    "uuid": {
      "title": "UUID",
      "description": "Unique MD5 hash generated from the `name` field",
      "example": "01d429fd3c4cc02697eea7f3fe838c54",
      "type": "string"
    },
    "prereg_doi": {
      "title": "Pre-registration document DOI",
      "description": "DOI (Digital Object Identifier) of pre-registration document describing data collection",
      "example": "",
      "type": "string"
    },
    "ethics_information": {
      "title": "Ethics information",
      "description": "Name of ethics committee and approval number",
      "example": "",
      "type": "string"
    },
    "clinical_trial": {
      "title": "Clinical trial",
      "description": "Is this a registered clinical trial?",
      "example": false,
      "type": "boolean"
    },
    "description": {
      "title": "Description",
      "description": "Short narrative description of the study",
      "example": "",
      "type": "string"
    },
    "sample": {
      "title": "Sample",
      "description": "Short description of the study sample.",
      "example": "Healthy control participants and ACHM patients",
      "type": "string"
    },
    "groups": {
      "title": "Groups",
      "description": "Description of the sample group(s) enrolled or examined in the study",
      "type": "array",
      "minItems": 1,
      "items": {
        "title": "Group",
        "type": "object",
        "properties": {
          "name": {
            "title": "Group name",
            "description": "Name of group.",
            "example": "ACHM patients",
            "type": "string"
          },
          "description": {
            "title": "Group description",
            "description": "Description of sample group",
            "example": "",
            "type": "string"
          },
          "label": {
            "title": "Group label",
            "description": "Label of sample group",
            "example": 0,
            "type": "integer"
          },
          "size": {
            "title": "Group size",
            "description": "Group size",
            "example": 6,
            "type": "integer",
            "minimum": 1
          },
          "inclusion": {
            "title": "Inclusion criteria",
            "description": "Inclusion criteria for sample group, given as an array of strings",
            "example": "",
            "type": "array",
            "minItems": 1,
            "items": { "type": "string" }
          },
          "exclusion": {
            "title": "Exclusion criteria",
            "description": "Exclusion criteria for sample group, given as an array of strings",
            "example": "",
            "type": "array",
            "minItems": 0,
            "items": { "type": "string" }
          }
        },
        "required": ["name", "description", "label", "size", "inclusion"]
      }
    },
    "intervention": {
      "title": "Intervention",
      "description": "Short description of the study intervention, if any",
      "example": "",
      "type": "string"
    },
    "keywords": {
      "title": "Keywords",
      "description": "Key words describing the study.",
      "example": ["actigraphy", "congenital achromatopsia", "circadian"],
      "type": "array",
      "minItems": 3,
      "items": { "type": "string" }
    },
    "contributors": {
      "title": "Contributors",
      "description": "Study contributors",
      "type": "array",
      "minItems": 1,
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema",
        "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/person.json",
        "title": "Base schema for contributors",
        "description": "Role and contact information about a person.",
        "required": ["name", "role", "institution"],
        "type": "object",
        "properties": {
          "name": { "title": "Name", "type": "string" },
          "role": {
            "title": "Roles",
            "description": "Role ID(s) according to the Contributor Role Ontology (https://www.ebi.ac.uk/ols/ontologies/cro)",
            "type": "array",
            "items": {
              "title": "Role ID",
              "description": "Role ID",
              "type": "string",
              "pattern": "^((CRO_[0-9]{7})|(CREDIT_[0-9]{8}))$"
            },
            "minItems": 1
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "idn-email"
          },
          "orcid": {
            "title": "ORCID identifier",
            "description": "ORCID identifier",
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[0-9|X]$"
          },
          "institution": {
            "title": "Institution",
            "type": "object",
            "properties": {
              "name": { "title": "Name", "type": "string" },
              "street_address": { "title": "Street address", "type": "string" },
              "city": { "title": "City", "type": "string" },
              "country": { "title": "Country", "type": "string" }
            },
            "required": ["name", "country"]
          }
        }
      }
    },
    "datasets": {
      "title": "Datasets",
      "type": "array",
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema",
        "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/dataset.json",
        "title": "Dataset-level metadata",
        "description": "Dataset-level metadata is metadata concerning one specific, per-participant dataset",
        "type": "object",
        "properties": {
          "name": {
            "title": "Dataset name",
            "description": "Dataset name.",
            "example": "ACHM2019_Actigraphy_P01",
            "type": "string"
          },
          "device_internal_id": {
            "title": "Internal ID of Device",
            "description": "Unique identifier of the device in this dataset",
            "type": "string"
          },
          "participant_internal_id": {
            "title": "Internal ID of Participant",
            "description": "Unique identifier of the participant in this dataset",
            "type": "string"
          },
          "uuid": {
            "title": "UUID",
            "description": "MD5 hash generated from the `name` field",
            "example": "9b4cef4132e84329bc38dda4b2fa3f5b",
            "type": "string"
          },
          "description": {
            "title": "Description",
            "description": "Short description of the dataset.",
            "example": "",
            "type": "string"
          },
          "instructions": {
            "title": "Instructions",
            "description": "Description of the instructions that were given to the study participants prior to or during collection of this data set",
            "type": "object",
            "properties": {
              "verbatim_instruction": {
                "title": "Verbatim instruction",
                "description": "Verbatim instructions given to participant",
                "example": "",
                "type": "string"
              },
              "wear_time": {
                "title": "Wear time",
                "description": "Number of days the participants were instructed to wear the actigraph. Fractional values are allowed",
                "example": 21,
                "type": "number",
                "minimum": 0
              }
            },
            "required": ["wear_time"]
          },
          "contributors": {
            "title": "Contributors",
            "type": "array",
            "items": {
              "$schema": "http://json-schema.org/draft-07/schema",
              "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/person.json",
              "title": "Base schema for contributors",
              "description": "Role and contact information about a person.",
              "required": ["name", "role", "institution"],
              "type": "object",
              "properties": {
                "name": { "title": "Name", "type": "string" },
                "role": {
                  "title": "Roles",
                  "description": "Role ID(s) according to the Contributor Role Ontology (https://www.ebi.ac.uk/ols/ontologies/cro)",
                  "type": "array",
                  "items": {
                    "title": "Role ID",
                    "description": "Role ID",
                    "type": "string",
                    "pattern": "^((CRO_[0-9]{7})|(CREDIT_[0-9]{8}))$"
                  },
                  "minItems": 1
                },
                "email": {
                  "title": "Email",
                  "type": "string",
                  "format": "idn-email"
                },
                "orcid": {
                  "title": "ORCID identifier",
                  "description": "ORCID identifier",
                  "type": "string",
                  "pattern": "^[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[0-9|X]$"
                },
                "institution": {
                  "title": "Institution",
                  "type": "object",
                  "properties": {
                    "name": { "title": "Name", "type": "string" },
                    "street_address": {
                      "title": "Street address",
                      "type": "string"
                    },
                    "city": { "title": "City", "type": "string" },
                    "country": { "title": "Country", "type": "string" }
                  },
                  "required": ["name", "country"]
                }
              }
            }
          },
          "acquisitions": {
            "title": "Acquisitions",
            "type": "array",
            "items": {
              "$schema": "http://json-schema.org/draft-07/schema",
              "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/acquisition.json",
              "title": "Acquisition-level metadata (within dataset)",
              "description": "Acquisition",
              "type": "object",
              "properties": {
                "device_internal_id": {
                  "description": "Reference to the internal ID of the related device",
                  "type": "string"
                },
                "device_position": {
                  "title": "Device position",
                  "description": "Position of the acquisition device",
                  "type": "object",
                  "properties": {
                    "location": {
                      "title": "Location of the device",
                      "description": "Anatomical location of the acquisition device",
                      "example": "Wrist of the non-dominant hand",
                      "type": "string"
                    },
                    "orientation": {
                      "title": "Orientation of the device",
                      "description": "Orientation of the acquisition device",
                      "example": "z-axis pointing out of wrist",
                      "type": "string"
                    }
                  },
                  "required": ["location", "orientation"]
                },
                "device_sensors": {
                  "title": "",
                  "description": "Sensors included in the device",
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "device_sensor_internal_id": {
                        "title": "Internal ID",
                        "description": "Internal ID of the sensor",
                        "example": "1",
                        "type": "number"
                      },
                      "device_sensor_category": {
                        "title": "Category",
                        "description": "Category of data acquired by the sensor",
                        "enum": ["motion", "light"]
                      }
                    },
                    "required": [
                      "device_sensor_internal_id",
                      "device_sensor_category"
                    ],
                    "dependencies": {
                      "device_sensor_category": {
                        "oneOf": [
                          {
                            "properties": {
                              "device_sensor_category": { "enum": ["motion"] },
                              "sensor": {
                                "$schema": "http://json-schema.org/draft-07/schema",
                                "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_motion_acq.json",
                                "definitions": {
                                  "calibration": {
                                    "title": "Calibration",
                                    "description": "Calibration factors",
                                    "type": "object",
                                    "properties": {
                                      "calibration_channel": {
                                        "title": "Sensor channel",
                                        "description": "Sensor channel associated with the calibration",
                                        "example": "x-axis",
                                        "type": "string"
                                      },
                                      "calibration_applied": {
                                        "description": "Calibration already applied to data",
                                        "example": false,
                                        "type": "boolean"
                                      },
                                      "calibration_offset": {
                                        "title": "Calibration offset",
                                        "example": -0.01,
                                        "type": "number"
                                      },
                                      "calibration_gain": {
                                        "title": "Calibration gain",
                                        "example": 1.023,
                                        "type": "number",
                                        "minimum": 0
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "calibration_channel",
                                      "calibration_applied",
                                      "calibration_offset",
                                      "calibration_gain"
                                    ]
                                  }
                                },
                                "title": "Motion sensor acquisition settings",
                                "description": "Information about acquisition settings of the motion sensor",
                                "type": "object",
                                "properties": {
                                  "sensor_motion_mode": {
                                    "title": "Acquisition mode",
                                    "description": "Acquisition mode(s). Mostly relevant for count-based devices",
                                    "example": "For example, at least one of [PIM, TAT, ZCM, RAW]",
                                    "type": "array",
                                    "items": { "type": "string" },
                                    "minItems": 1,
                                    "uniqueItems": true
                                  },
                                  "sensor_motion_sampling": {
                                    "title": "Sampling period",
                                    "description": "Sampling period of the motion sensor",
                                    "type": "object",
                                    "properties": {
                                      "sampling_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "sampling_unit": {
                                        "title": "Unit",
                                        "example": "s or Hz",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "sampling_value",
                                      "sampling_unit"
                                    ]
                                  },
                                  "sensor_motion_storing": {
                                    "title": "Storing period",
                                    "description": "In-memory storing period of the acquired data",
                                    "type": "object",
                                    "properties": {
                                      "storing_value": {
                                        "title": "Value",
                                        "type": "number",
                                        "minimum": 0
                                      },
                                      "storing_unit": {
                                        "title": "Unit",
                                        "example": "s or Hz",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "storing_value",
                                      "storing_unit"
                                    ]
                                  },
                                  "sensor_motion_range": {
                                    "title": "Acceleration range",
                                    "description": "Range of accelerations configured in the device for specific acquisition",
                                    "type": "object",
                                    "properties": {
                                      "range_min_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "range_max_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "range_unit": {
                                        "title": "Unit",
                                        "example": "g",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "storing_value",
                                      "storing_unit"
                                    ]
                                  },
                                  "sensor_motion_calibration": {
                                    "title": "Motion sensor calibration",
                                    "description": "Calibration factors for the acquired data",
                                    "type": "array",
                                    "items": {
                                      "title": "Calibration",
                                      "description": "Calibration factors",
                                      "type": "object",
                                      "properties": {
                                        "calibration_channel": {
                                          "title": "Sensor channel",
                                          "description": "Sensor channel associated with the calibration",
                                          "example": "x-axis",
                                          "type": "string"
                                        },
                                        "calibration_applied": {
                                          "description": "Calibration already applied to data",
                                          "example": false,
                                          "type": "boolean"
                                        },
                                        "calibration_offset": {
                                          "title": "Calibration offset",
                                          "example": -0.01,
                                          "type": "number"
                                        },
                                        "calibration_gain": {
                                          "title": "Calibration gain",
                                          "example": 1.023,
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "calibration_channel",
                                        "calibration_applied",
                                        "calibration_offset",
                                        "calibration_gain"
                                      ]
                                    },
                                    "minItems": 1,
                                    "uniqueItems": true
                                  }
                                },
                                "required": [
                                  "sensor_motion_mode",
                                  "sensor_motion_sampling",
                                  "sensor_motion_range"
                                ]
                              }
                            },
                            "required": ["sensor"]
                          },
                          {
                            "properties": {
                              "device_sensor_category": { "enum": ["light"] },
                              "sensor": {
                                "$schema": "http://json-schema.org/draft-07/schema",
                                "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_light_acq.json",
                                "definitions": {
                                  "calibration": {
                                    "title": "Calibration",
                                    "description": "Information about sensor calibration",
                                    "type": "object",
                                    "properties": {
                                      "calibration_channel": {
                                        "title": "Sensor channel",
                                        "description": "Sensor channel associated with the calibration",
                                        "example": "R channel",
                                        "type": "string"
                                      },
                                      "calibration_applied": {
                                        "description": "Calibration already applied to data",
                                        "example": false,
                                        "type": "boolean"
                                      },
                                      "calibration_formula": {
                                        "description": "Generic calibration formula",
                                        "example": "param[0]*exp(-t/param[1]) + param[2]",
                                        "type": "string",
                                        "pattern": "(?:param\\[[0-9]+\\])+"
                                      },
                                      "calibration_factors": {
                                        "description": "Calibration factors used in the generic formula",
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "calibration_factor_index": {
                                              "title": "Index of the calibration factor",
                                              "description": "Index associated to a calibration factor",
                                              "example": 1,
                                              "type": "integer",
                                              "minimum": 0
                                            },
                                            "calibration_factor_value": {
                                              "title": "Value of the calibration factor",
                                              "description": "Value associated to a calibration factor",
                                              "example": -3.14159,
                                              "type": "number"
                                            }
                                          }
                                        },
                                        "minItems": 1,
                                        "uniqueItems": true
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "calibration_channel",
                                      "calibration_applied"
                                    ]
                                  }
                                },
                                "title": "Light sensor acquisition settings",
                                "description": "Information about acquisition settings of the light sensor",
                                "type": "object",
                                "properties": {
                                  "sensor_light_sampling": {
                                    "title": "Sampling period",
                                    "description": "Sampling period of the light sensor",
                                    "type": "object",
                                    "properties": {
                                      "sampling_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "sampling_unit": {
                                        "title": "Unit",
                                        "example": "s or Hz",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "sampling_value",
                                      "sampling_unit"
                                    ]
                                  },
                                  "sensor_light_range": {
                                    "title": "Light intensity range",
                                    "description": "Range of light intensities acquired by the device",
                                    "type": "object",
                                    "properties": {
                                      "range_min_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "range_max_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "range_unit": {
                                        "title": "Unit",
                                        "example": "lux",
                                        "type": "string"
                                      },
                                      "range_source": {
                                        "title": "Source",
                                        "example": "Manufacturer-provided",
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "sensor_light_calibration": {
                                    "title": "Light sensor calibration",
                                    "description": "Calibration for the acquired data",
                                    "type": "array",
                                    "items": {
                                      "title": "Calibration",
                                      "description": "Information about sensor calibration",
                                      "type": "object",
                                      "properties": {
                                        "calibration_channel": {
                                          "title": "Sensor channel",
                                          "description": "Sensor channel associated with the calibration",
                                          "example": "R channel",
                                          "type": "string"
                                        },
                                        "calibration_applied": {
                                          "description": "Calibration already applied to data",
                                          "example": false,
                                          "type": "boolean"
                                        },
                                        "calibration_formula": {
                                          "description": "Generic calibration formula",
                                          "example": "param[0]*exp(-t/param[1]) + param[2]",
                                          "type": "string",
                                          "pattern": "(?:param\\[[0-9]+\\])+"
                                        },
                                        "calibration_factors": {
                                          "description": "Calibration factors used in the generic formula",
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "calibration_factor_index": {
                                                "title": "Index of the calibration factor",
                                                "description": "Index associated to a calibration factor",
                                                "example": 1,
                                                "type": "integer",
                                                "minimum": 0
                                              },
                                              "calibration_factor_value": {
                                                "title": "Value of the calibration factor",
                                                "description": "Value associated to a calibration factor",
                                                "example": -3.14159,
                                                "type": "number"
                                              }
                                            }
                                          },
                                          "minItems": 1,
                                          "uniqueItems": true
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "calibration_channel",
                                        "calibration_applied"
                                      ]
                                    },
                                    "minItems": 1,
                                    "uniqueItems": true
                                  }
                                },
                                "required": [
                                  "sensor_light_sampling",
                                  "sensor_light_range"
                                ]
                              }
                            },
                            "required": ["sensor"]
                          }
                        ]
                      }
                    }
                  },
                  "minItems": 1,
                  "uniqueItems": true
                },
                "comment": {
                  "description": "Comment about an acquisition",
                  "type": "string"
                }
              },
              "required": ["device_internal_id", "device_position"]
            }
          },
          "data_set": {
            "title": "Dataset",
            "description": "Information about the data collection effort.",
            "type": "object",
            "properties": {
              "period": {
                "title": "Period",
                "description": "Time period during which the data collection was performed",
                "type": "object",
                "properties": {
                  "start_date_time": {
                    "title": "Start datetime",
                    "description": "Start date-time for the data collection",
                    "type": "string",
                    "format": "date-time"
                  },
                  "ongoing": {
                    "title": "Ongoing?",
                    "description": "Indicate if the data collection is still ongoing",
                    "type": "boolean",
                    "default": true
                  }
                },
                "dependencies": {
                  "ongoing": {
                    "oneOf": [
                      { "properties": { "ongoing": { "const": true } } },
                      {
                        "properties": {
                          "ongoing": { "const": false },
                          "stop_date_time": {
                            "title": "Stop datetime",
                            "description": "Stop date-time for the data collection",
                            "type": "string",
                            "format": "date-time"
                          }
                        },
                        "required": ["stop_date_time"]
                      }
                    ]
                  }
                }
              }
            },
            "required": ["period"]
          }
        },
        "required": ["uuid", "description", "instructions", "contributors"]
      }
    },
    "participants": {
      "title": "Participants",
      "type": "array",
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema",
        "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/participant.json",
        "definitions": {
          "phenotype": {
            "type": "object",
            "title": "Phenotype",
            "properties": {
              "name": {
                "title": "Name",
                "description": "Phenotype",
                "type": "string"
              },
              "value": {
                "title": "Value",
                "description": "Value",
                "type": "string"
              }
            },
            "required": ["name", "value"]
          }
        },
        "title": "Participant-level metadata",
        "description": "Information about the participant",
        "type": "object",
        "properties": {
          "internal_id": {
            "title": "Internal ID",
            "description": "Unique identifier for this participant",
            "type": "string"
          },
          "age": {
            "title": "Age",
            "description": "Age of the participant",
            "example": "",
            "type": "integer",
            "minimum": 0
          },
          "sex": {
            "title": "Sex",
            "description": "Sex",
            "example": "",
            "type": "string"
          },
          "handedness": {
            "title": "Handedness",
            "description": "Handedness. Available values: Left, Right, Ambidexter or Not recorded",
            "example": "Left",
            "enum": ["Left", "Right", "Ambidexter", "Not recorded"]
          },
          "timezone": {
            "title": "Time zone (UTC offset)",
            "description": "UTC offset of the participant's time zone.",
            "example": "-05:00",
            "type": "string",
            "pattern": "^[+-]([01][0-9]|2[0-4])(:[0-5][0-9])$"
          },
          "phenotypes": {
            "title": "Phenotypes",
            "type": "array",
            "items": {
              "type": "object",
              "title": "Phenotype",
              "properties": {
                "name": {
                  "title": "Name",
                  "description": "Phenotype",
                  "type": "string"
                },
                "value": {
                  "title": "Value",
                  "description": "Value",
                  "type": "string"
                }
              },
              "required": ["name", "value"]
            }
          },
          "events": {
            "title": "Events",
            "type": "array",
            "items": {
              "$schema": "http://json-schema.org/draft-07/schema",
              "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/event.json",
              "title": "Event-level metadata (within dataset)",
              "description": "Event definition in the context of actigraphy or light data set",
              "type": "object",
              "properties": {
                "event_id": {
                  "title": "Event ID",
                  "description": "The unique identifier for an event",
                  "type": "number",
                  "minimum": 0,
                  "multipleOf": 1
                },
                "event_name": {
                  "title": "Event name",
                  "description": "Name of the event",
                  "type": "string"
                },
                "start_date_time": {
                  "title": "Start datetime",
                  "description": "Start date-time for an event",
                  "type": "string",
                  "format": "date-time"
                },
                "stop_date_time": {
                  "title": "Stop datetime",
                  "description": "Stop date-time for an event",
                  "type": "string",
                  "format": "date-time"
                },
                "comment": {
                  "title": "Comment",
                  "description": "Comment about an event",
                  "type": "string"
                }
              },
              "required": [
                "event_id",
                "event_name",
                "start_date_time",
                "stop_date_time"
              ]
            }
          }
        },
        "required": ["internal_id", "age", "sex"]
      }
    },
    "devices": {
      "title": "Devices",
      "type": "array",
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema",
        "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/device.json",
        "title": "Acquisition device",
        "description": "Information about the data acquisition device",
        "type": "object",
        "properties": {
          "internal_id": {
            "title": "Internal ID",
            "description": "Unique identifier for this device",
            "type": "string"
          },
          "manufacturer": {
            "title": "Manufacturer",
            "description": "Manufacturer of the device",
            "example": "",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "description": "Model of the device",
            "example": "",
            "type": "string"
          },
          "serial_number": {
            "title": "Serial number",
            "description": "Serial number of the device",
            "example": "",
            "type": "string"
          },
          "harware_version": {
            "title": "Hardware version",
            "description": "Version number of the hardware",
            "example": "",
            "type": "string"
          },
          "memory_size": {
            "title": "Memory size",
            "description": "Size of the internal memory",
            "example": "512MB",
            "type": "string"
          },
          "device_sensors": {
            "title": "Device sensors",
            "description": "Sensors included in the device",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "device_sensor_internal_id": {
                  "title": "Internal ID",
                  "description": "Internal ID of the sensor",
                  "example": "1",
                  "type": "number"
                },
                "device_sensor_name": {
                  "title": "Name",
                  "description": "Name of the sensor",
                  "example": "Motion sensor",
                  "type": "string"
                },
                "device_sensor_category": {
                  "title": "Category",
                  "description": "Category of data acquired by the sensor",
                  "enum": ["motion", "light"]
                }
              },
              "required": [
                "device_sensor_internal_id",
                "device_sensor_name",
                "device_sensor_category"
              ],
              "dependencies": {
                "device_sensor_category": {
                  "oneOf": [
                    {
                      "properties": {
                        "device_sensor_category": { "enum": ["motion"] },
                        "sensor": {
                          "$schema": "http://json-schema.org/draft-07/schema",
                          "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_motion.json",
                          "definitions": {
                            "filter": {
                              "title": "Filter",
                              "description": "Description of the filters applied to the acquired data",
                              "type": "object",
                              "properties": {
                                "filter_type": {
                                  "title": "Type",
                                  "description": "Type of filter",
                                  "enum": ["low-pass", "band-pass", "high-pass"]
                                },
                                "filter_order": {
                                  "title": "Order",
                                  "description": "Order of filter",
                                  "type": "integer"
                                },
                                "filter_boundary": {
                                  "title": "Boundary",
                                  "description": "Frequency settings of the filter",
                                  "type": "object",
                                  "properties": {
                                    "filter_boundary_lower": {
                                      "title": "Lower boundary",
                                      "description": "Lower boundary (Hz)",
                                      "type": "number"
                                    },
                                    "filter_boundary_upper": {
                                      "title": "Upper boundary",
                                      "description": "Upper boundary (Hz)",
                                      "type": "number"
                                    }
                                  },
                                  "additionalProperties": false,
                                  "minProperties": 1
                                }
                              },
                              "required": ["filter_type", "filter_boundary"]
                            },
                            "channel": {
                              "title": "Channel",
                              "type": "object",
                              "properties": {
                                "name": {
                                  "title": "Name",
                                  "description": "Name of the channel",
                                  "type": "string"
                                },
                                "description": {
                                  "title": "Description",
                                  "description": "Description of the channel",
                                  "type": "string"
                                },
                                "filters": {
                                  "title": "Filters",
                                  "type": "array",
                                  "items": {
                                    "title": "Filter",
                                    "description": "Description of the filters applied to the acquired data",
                                    "type": "object",
                                    "properties": {
                                      "filter_type": {
                                        "title": "Type",
                                        "description": "Type of filter",
                                        "enum": [
                                          "low-pass",
                                          "band-pass",
                                          "high-pass"
                                        ]
                                      },
                                      "filter_order": {
                                        "title": "Order",
                                        "description": "Order of filter",
                                        "type": "integer"
                                      },
                                      "filter_boundary": {
                                        "title": "Boundary",
                                        "description": "Frequency settings of the filter",
                                        "type": "object",
                                        "properties": {
                                          "filter_boundary_lower": {
                                            "title": "Lower boundary",
                                            "description": "Lower boundary (Hz)",
                                            "type": "number"
                                          },
                                          "filter_boundary_upper": {
                                            "title": "Upper boundary",
                                            "description": "Upper boundary (Hz)",
                                            "type": "number"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "minProperties": 1
                                      }
                                    },
                                    "required": [
                                      "filter_type",
                                      "filter_boundary"
                                    ]
                                  }
                                },
                                "range": {
                                  "title": "Range",
                                  "description": "Range of acquisition",
                                  "type": "object",
                                  "properties": {
                                    "range_value_min": {
                                      "title": "Minimum",
                                      "type": "number"
                                    },
                                    "range_value_max": {
                                      "title": "Maximum",
                                      "type": "number"
                                    },
                                    "range_unit": {
                                      "title": "Unit",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "range_value_min",
                                    "range_value_max",
                                    "range_unit"
                                  ]
                                },
                                "resolution": {
                                  "title": "Resolution",
                                  "type": "object",
                                  "properties": {
                                    "resolution_value": {
                                      "title": "Value",
                                      "type": "number"
                                    },
                                    "resolution_unit": {
                                      "title": "Unit",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "resolution_value",
                                    "resolution_unit"
                                  ]
                                }
                              },
                              "required": [
                                "name",
                                "description",
                                "range",
                                "resolution"
                              ]
                            }
                          },
                          "title": "Motion sensor",
                          "description": "Information about the motion sensor",
                          "type": "object",
                          "properties": {
                            "sensor_motion_uuid": {
                              "title": "UUID",
                              "description": "MD5 hash generated from the `manufacturer+model` field.",
                              "example": "9b4cef4132e84329bc38dda4b2fa3f5b",
                              "type": "string"
                            },
                            "sensor_motion_manufacturer": {
                              "title": "Manufacturer",
                              "description": "Manufacturer of the motion sensor",
                              "example": "",
                              "type": "string"
                            },
                            "sensor_motion_type": {
                              "title": "Type",
                              "description": "Type of the motion sensor",
                              "example": "accelerometer",
                              "type": "string"
                            },
                            "sensor_motion_model": {
                              "title": "Model",
                              "description": "Model of the sensor",
                              "example": "BMI160",
                              "type": "string"
                            },
                            "sensor_motion_serial_number": {
                              "title": "Serial number",
                              "description": "Serial number of the motion sensor",
                              "example": "ABCD-1234",
                              "type": "string"
                            },
                            "sensor_motion_channels": {
                              "title": "Channels",
                              "type": "array",
                              "items": {
                                "title": "Channel",
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "title": "Name",
                                    "description": "Name of the channel",
                                    "type": "string"
                                  },
                                  "description": {
                                    "title": "Description",
                                    "description": "Description of the channel",
                                    "type": "string"
                                  },
                                  "filters": {
                                    "title": "Filters",
                                    "type": "array",
                                    "items": {
                                      "title": "Filter",
                                      "description": "Description of the filters applied to the acquired data",
                                      "type": "object",
                                      "properties": {
                                        "filter_type": {
                                          "title": "Type",
                                          "description": "Type of filter",
                                          "enum": [
                                            "low-pass",
                                            "band-pass",
                                            "high-pass"
                                          ]
                                        },
                                        "filter_order": {
                                          "title": "Order",
                                          "description": "Order of filter",
                                          "type": "integer"
                                        },
                                        "filter_boundary": {
                                          "title": "Boundary",
                                          "description": "Frequency settings of the filter",
                                          "type": "object",
                                          "properties": {
                                            "filter_boundary_lower": {
                                              "title": "Lower boundary",
                                              "description": "Lower boundary (Hz)",
                                              "type": "number"
                                            },
                                            "filter_boundary_upper": {
                                              "title": "Upper boundary",
                                              "description": "Upper boundary (Hz)",
                                              "type": "number"
                                            }
                                          },
                                          "additionalProperties": false,
                                          "minProperties": 1
                                        }
                                      },
                                      "required": [
                                        "filter_type",
                                        "filter_boundary"
                                      ]
                                    }
                                  },
                                  "range": {
                                    "title": "Range",
                                    "description": "Range of acquisition",
                                    "type": "object",
                                    "properties": {
                                      "range_value_min": {
                                        "title": "Minimum",
                                        "type": "number"
                                      },
                                      "range_value_max": {
                                        "title": "Maximum",
                                        "type": "number"
                                      },
                                      "range_unit": {
                                        "title": "Unit",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "range_value_min",
                                      "range_value_max",
                                      "range_unit"
                                    ]
                                  },
                                  "resolution": {
                                    "title": "Resolution",
                                    "type": "object",
                                    "properties": {
                                      "resolution_value": {
                                        "title": "Value",
                                        "type": "number"
                                      },
                                      "resolution_unit": {
                                        "title": "Unit",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "resolution_value",
                                      "resolution_unit"
                                    ]
                                  }
                                },
                                "required": [
                                  "name",
                                  "description",
                                  "range",
                                  "resolution"
                                ]
                              }
                            }
                          },
                          "required": [
                            "sensor_motion_uuid",
                            "sensor_motion_manufacturer",
                            "sensor_motion_type",
                            "sensor_motion_model"
                          ]
                        }
                      },
                      "required": ["sensor"]
                    },
                    {
                      "properties": {
                        "device_sensor_category": { "enum": ["light"] },
                        "sensor": {
                          "$schema": "http://json-schema.org/draft-07/schema",
                          "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_light.json",
                          "definitions": {
                            "channel": {
                              "title": "Channel",
                              "type": "object",
                              "properties": {
                                "name": {
                                  "title": "Name",
                                  "description": "Name of the channel",
                                  "type": "string"
                                },
                                "description": {
                                  "title": "Description",
                                  "description": "Description of the channel",
                                  "type": "string"
                                },
                                "spectral_sensitivity": {
                                  "title": "Spectral sensitivity",
                                  "type": "object",
                                  "properties": {
                                    "spectral_sensitivity_calibration_status": {
                                      "title": "Calibration status",
                                      "enum": ["Calibrated", "Uncalibrated"]
                                    },
                                    "spectral_sensitivity_calibration_type": {
                                      "title": "Calibration type",
                                      "type": "string"
                                    },
                                    "spectral_sensitivity_calibration_details": {
                                      "title": "Calibration details",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "spectral_sensitivity_calibration_status"
                                  ]
                                },
                                "linearity": {
                                  "type": "object",
                                  "title": "Linearity",
                                  "properties": {
                                    "linearity_calibration_status": {
                                      "title": "Calibration status",
                                      "enum": ["Calibrated", "Uncalibrated"]
                                    },
                                    "linearity_calibration_type": {
                                      "title": "Calibration type",
                                      "type": "string"
                                    },
                                    "linearity_calibration_details": {
                                      "title": "Calibration details",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["linearity_calibration_status"]
                                },
                                "directional_response": {
                                  "type": "object",
                                  "title": "Directional response",
                                  "properties": {
                                    "directional_response_calibration_status": {
                                      "title": "Calibration status",
                                      "enum": ["Calibrated", "Uncalibrated"]
                                    },
                                    "directional_response_calibration_type": {
                                      "title": "Calibration type",
                                      "type": "string"
                                    },
                                    "directional_response_calibration_details": {
                                      "title": "Calibration details",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "directional_response_calibration_status"
                                  ]
                                }
                              },
                              "required": [
                                "name",
                                "spectral_sensitivity",
                                "linearity",
                                "directional_response"
                              ]
                            }
                          },
                          "title": "Light sensor",
                          "description": "Information about the light sensor",
                          "type": "object",
                          "properties": {
                            "sensor_light_uuid": {
                              "title": "UUID",
                              "description": "MD5 hash generated from the `manufacturer+model` field.",
                              "example": "9b4cef4132e84329bc38dda4b2fa3f5b",
                              "type": "string"
                            },
                            "sensor_light_manufacturer": {
                              "title": "Manufacturer",
                              "description": "Manufacturer of the light sensor",
                              "example": "Hamamatsu Photonics Co., Ltd",
                              "type": "string"
                            },
                            "sensor_light_type": {
                              "title": "Type",
                              "description": "Type of the light sensor",
                              "example": "spectrophotometer",
                              "type": "string"
                            },
                            "sensor_light_model": {
                              "title": "Model",
                              "description": "Model of the light sensor",
                              "example": "C12666MA",
                              "type": "string"
                            },
                            "sensor_light_serial_number": {
                              "title": "Serial number",
                              "description": "Serial number of the light sensor",
                              "example": "ABCD-1234",
                              "type": "string"
                            },
                            "sensor_light_channels": {
                              "title": "Light channels",
                              "type": "array",
                              "items": {
                                "title": "Channel",
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "title": "Name",
                                    "description": "Name of the channel",
                                    "type": "string"
                                  },
                                  "description": {
                                    "title": "Description",
                                    "description": "Description of the channel",
                                    "type": "string"
                                  },
                                  "spectral_sensitivity": {
                                    "title": "Spectral sensitivity",
                                    "type": "object",
                                    "properties": {
                                      "spectral_sensitivity_calibration_status": {
                                        "title": "Calibration status",
                                        "enum": ["Calibrated", "Uncalibrated"]
                                      },
                                      "spectral_sensitivity_calibration_type": {
                                        "title": "Calibration type",
                                        "type": "string"
                                      },
                                      "spectral_sensitivity_calibration_details": {
                                        "title": "Calibration details",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "spectral_sensitivity_calibration_status"
                                    ]
                                  },
                                  "linearity": {
                                    "type": "object",
                                    "title": "Linearity",
                                    "properties": {
                                      "linearity_calibration_status": {
                                        "title": "Calibration status",
                                        "enum": ["Calibrated", "Uncalibrated"]
                                      },
                                      "linearity_calibration_type": {
                                        "title": "Calibration type",
                                        "type": "string"
                                      },
                                      "linearity_calibration_details": {
                                        "title": "Calibration details",
                                        "type": "string"
                                      }
                                    },
                                    "required": ["linearity_calibration_status"]
                                  },
                                  "directional_response": {
                                    "type": "object",
                                    "title": "Directional response",
                                    "properties": {
                                      "directional_response_calibration_status": {
                                        "title": "Calibration status",
                                        "enum": ["Calibrated", "Uncalibrated"]
                                      },
                                      "directional_response_calibration_type": {
                                        "title": "Calibration type",
                                        "type": "string"
                                      },
                                      "directional_response_calibration_details": {
                                        "title": "Calibration details",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "directional_response_calibration_status"
                                    ]
                                  }
                                },
                                "required": [
                                  "name",
                                  "spectral_sensitivity",
                                  "linearity",
                                  "directional_response"
                                ]
                              }
                            }
                          },
                          "required": [
                            "sensor_light_uuid",
                            "sensor_light_manufacturer",
                            "sensor_light_type",
                            "sensor_light_model"
                          ]
                        }
                      },
                      "required": ["sensor"]
                    }
                  ]
                }
              }
            },
            "minItems": 1,
            "uniqueItems": true
          }
        },
        "required": ["internal_id", "manufacturer", "model", "serial_number"]
      }
    }
  },
  "dependencies": {
    "clinical_trial": {
      "oneOf": [
        { "properties": { "clinical_trial": { "const": false } } },
        {
          "properties": {
            "clinical_trial": { "const": true },
            "clinical_trial_id": {
              "title": "Clinical Trial ID",
              "description": "Clinical trial identifier as well as registry",
              "example": "",
              "type": "string"
            }
          },
          "required": ["clinical_trial_id"]
        }
      ]
    }
  },
  "required": [
    "name",
    "uuid",
    "clinical_trial",
    "ethics_information",
    "sample",
    "description",
    "keywords"
  ]
}
